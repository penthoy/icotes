<!DOCTYPE html>
<html>
<head>
    <title>CodeMirror Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .error { color: red; background: #ffebee; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .success { color: green; background: #e8f5e9; padding: 10px; margin: 10px 0; border-radius: 4px; }
        .test-result { margin: 20px 0; padding: 10px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>CodeMirror Error Test</h1>
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, isError = false) {
            const div = document.createElement('div');
            div.className = isError ? 'error' : 'success';
            div.textContent = message;
            results.appendChild(div);
        }
        
        // Test if we can load CodeMirror packages without errors
        async function testCodeMirror() {
            try {
                addResult('Testing CodeMirror package imports...');
                
                // Test @codemirror/state
                const state = await import('/node_modules/@codemirror/state/dist/index.js');
                addResult('✓ @codemirror/state imported successfully');
                
                // Test @codemirror/view
                const view = await import('/node_modules/@codemirror/view/dist/index.js');
                addResult('✓ @codemirror/view imported successfully');
                
                // Test creating a simple editor
                const { EditorState } = state;
                const { EditorView } = view;
                
                const editorState = EditorState.create({
                    doc: 'console.log("Hello, CodeMirror!");',
                    extensions: []
                });
                
                const div = document.createElement('div');
                div.style.border = '1px solid #ccc';
                div.style.margin = '10px 0';
                results.appendChild(div);
                
                const editorView = new EditorView({
                    state: editorState,
                    parent: div
                });
                
                addResult('✓ CodeMirror editor created successfully - No extension errors!');
                
            } catch (error) {
                addResult(`✗ Error: ${error.message}`, true);
                console.error('CodeMirror test error:', error);
            }
        }
        
        // Run the test
        testCodeMirror();
    </script>
</body>
</html>
